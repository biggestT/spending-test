<!doctype html>
<html lang="en" data-framework="backbonejs">
	<head>
		<meta charset="utf-8">
		<title>My spendings</title>
		<link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.css">
		<link rel="stylesheet" href="style.css">
	</head>
	<body>
		<div class="container">
			<section id="spendzapp">
				<header id="header">
					<h1>$pendings</h1>
					<div id="new-spending">
						<!-- filled by app -->
					</div>
				</header>
				<section id="main">
					<ul id="spendings-list">
						<!-- filled by app -->
					</ul>
					<p>Double-click to edit a spending</p>
				</section>
				<footer id="footer"></footer>
			</section>
		</div>
		<footer id="info">
		</footer>

		<!-- templates to be used by backbone -->

		<script type="text/template" id="item-template">
			<div class="view">
				<label class="title"><%- title %></label>
				<% _.each(tags, function(tag) { %>
					<a href="#<%= tag %>">
					<label class="badge tag"><%= tag %></label>
					</a>
				<% }); %>
				<label class="value"><%- value %></label>
				<label ><%- currency %></label>
				<label ><%- time %></label>
				<button class="destroy">X</button>
			</div>
			<input type="text" class="edit edit-title" value="<%- title %>" placeholder="item">
			<input type="text" class="edit edit-tags" value="<%- tagsString %>" placeholder="tags">
			<input type="number" class="edit edit-value" value="<%- value %>" placeholder="price">
			<select name="currency" class="edit edit-currency">
			<option value="<%= currency %>" class="total-currency-option"><%= currency %>
			<% _.each(currencies, function(curr) { 
				if (curr.name != currency ) { %>
				<option value="<%= curr.name %>"><%= curr.name %>
			<% }
		}); %>
			</select>
			<input type="date" class="edit edit-time"  value="<%= time %>">
			<input type="button" class="edit submit-spending" value="submit"></input>
		</script>

		<script type="text/template" id="stats-template">
			<span id="spendings-amount"><strong><%= total %></strong> 
			<select name="currency" id="total-currency-select">
			// first print the currently choosen currency
			<option value="<%= currency %>" class="total-currency-option"><%= currency %>
			<% _.each(currencies, function(curr) { %>
				<% if (curr.name != currency) { %>
				<option value="<%= curr.name %>" class="total-currency-option"><%= curr.name %>
				<% } %>
			<% }); %>
			</select>
			spent  on </span>
			<span id="spendings-count"><strong><%= count %></strong> <%= count === 1 ? 'item' : 'items' %> </span>
		</script>

		<!-- script files needed -->
		<script src="bower_components/jquery/jquery.js"></script>
		<script src="bower_components/underscore/underscore.js"></script>
		<script src="bower_components/backbone/backbone.js"></script>
		<script src="bower_components/backbone.localStorage/backbone.localStorage.js"></script>
		<script src="js/models/spending.js"></script>
		<script src="js/collections/spendings.js"></script>
		<script src="js/views/spending-view.js"></script>
		<script src="js/views/app-view.js"></script>
		<script src="js/app.js"></script>
		<script src="js/routers/router.js"></script>
	</body>
</html>